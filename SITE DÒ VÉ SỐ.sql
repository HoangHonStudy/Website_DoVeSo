CREATE DATABASE QUANLY_VEDO;
GO
USE QUANLY_VEDO;
CREATE TABLE NGUOIDUNG (
	MAND INT IDENTITY(1,1) PRIMARY KEY,
	USERNAME VARCHAR(30) NOT NULL,
	TENND NVARCHAR(30) NOT NULL,
	SODIENTHOAI VARCHAR(10),
	EMAIL VARCHAR(30) NOT NULL,
	MATKHAU VARCHAR(100) NOT NULL,
	DIACHI NVARCHAR(300) NOT NULL,
	ROLE INT NOT NULL,
	TRANGTHAI INT NOT NULL
);
CREATE TABLE TINH (
	MATINH INT IDENTITY(1, 1) PRIMARY KEY,
	TENTINH NVARCHAR(20) NOT NULL,
	MIEN NVARCHAR(20) NOT NULL
);
CREATE TABLE CHITIET_GIAI (
	MAGIAI INT IDENTITY(1,1) PRIMARY KEY,
	GIAINGAY DATETIME NOT NULL,
	MATINH INT FOREIGN KEY REFERENCES TINH(MATINH),
	DACBIET VARCHAR(10),
	GIAINHAT VARCHAR(5),
	GIAINHI VARCHAR(15),
	GIAIBA VARCHAR(40),
	GIAIBON VARCHAR(50),
	GIAINAM VARCHAR(40),
	GIAISAU VARCHAR(20),
	GIAIBAY VARCHAR(15),
	GIAITAM VARCHAR(5)
);
CREATE TABLE LICHSU_DO (
	ID INT IDENTITY(1, 1) PRIMARY KEY,
	MAND INT FOREIGN KEY REFERENCES NGUOIDUNG(MAND),
	NGAYDO DATETIME NOT NULL,
	MAVE VARCHAR(10) NOT NULL,
	MAGIAI INT FOREIGN KEY REFERENCES CHITIET_GIAI(MAGIAI),
	KETQUA int
);
CREATE TABLE AVATAR (
	ID INT IDENTITY(1, 1) PRIMARY KEY,
	MAND INT FOREIGN KEY REFERENCES NGUOIDUNG(MAND),
	SRC VARCHAR(300) DEFAULT '/data/avatar.jpg' NOT NULL
);
GO
INSERT INTO NGUOIDUNG(USERNAME, TENND, SODIENTHOAI, EMAIL, MATKHAU, DIACHI, ROLE, TRANGTHAI) 
	VALUES ('hon',N'TRẦN HOÀNG HÔN', '0943243734', 'honthfx14144@funix.edu.vn', CONVERT(VARCHAR(32), HASHBYTES('MD5','hon@FX14144'), 2),  N'Hiệp Bình Chánh, Thủ Đức', 0, 1),
			('kiss',N'Kiss Best', '0943243734', 'kissbest01@gmail.com', CONVERT(VARCHAR(32), HASHBYTES('MD5','@Kissbest01'), 2),  'HCM', 0, 1),
			('hoanghon10t1',N'Hôn', '0943243734', 'hoanghon10t1@gmail.com', CONVERT(VARCHAR(32), HASHBYTES('MD5','@Hoanghon10t1'), 2),  N'Cái Nước, Cà Mau', 0, 1),
			('hoanghonhutech', N'Hutech', '0943243734', 'hoanghonhutech@gmail.com', CONVERT(VARCHAR(32), HASHBYTES('MD5','Hoanghonhutech@1996'), 2),  N'Bình Thạnh, HCM', 1, 1),
			('test01', N'Test 1', '0942242842', 'test01@gmail.com', CONVERT(VARCHAR(32), HASHBYTES('MD5','user@Test01'), 2),  'HCM', 0, 2),
			('test02', N'Test 2', '0942242842', 'test02@gmail.com', CONVERT(VARCHAR(32), HASHBYTES('MD5','user@Test02'), 2),  'HCM', 0, 2),
			('test03', N'Test 3', '0942242842', 'test03@gmail.com', CONVERT(VARCHAR(32), HASHBYTES('MD5','user@Test03'), 2),  'HCM', 0, 2),
			('test04', N'Test 4', '0942242842', 'test04@gmail.com', CONVERT(VARCHAR(32), HASHBYTES('MD5','user@Test04'), 2),  'HCM', 0, 2),
			('test05', N'Test 5', '0942242842', 'test05@gmail.com', CONVERT(VARCHAR(32), HASHBYTES('MD5','user@Test05'), 2),  'HCM', 0, 1),
			('test06', N'Test 6', '0942242842', 'test06@gmail.com', CONVERT(VARCHAR(32), HASHBYTES('MD5','user@Test06'), 2),  'HCM', 0, 1),
			('test07', N'Test 7', '0942242842', 'test07@gmail.com', CONVERT(VARCHAR(32), HASHBYTES('MD5','user@Test07'), 2),  'HCM', 0, 1);
INSERT INTO TINH (TENTINH, MIEN) 
	VALUES (N'Hồ Chí Minh', N'Miền Nam'),
			(N'Long An', N'Miền Nam'),
			(N'Bình Phước', N'Miền Nam'),
			(N'Hậu Giang', N'Miền Nam'),
			(N'Bình Định', N'Miền Trung'),
			(N'Quảng Trị', N'Miền Trung'),
			(N'Quảng Bình', N'Miền Trung'),
			(N'Đà Nẵng', N'Miền Trung'),
			(N'Hải Phòng', N'Miền Bắc'),
			(N'Hà Nội', N'Miền Bắc'),
			(N'Thái Bình', N'Miền Bắc');
INSERT INTO CHITIET_GIAI(GIAINGAY, MATINH, DACBIET, GIAINHAT, GIAINHI, GIAIBA, GIAIBON, GIAINAM, GIAISAU, GIAIBAY, GIAITAM)
	VALUES ('20220820', 1, '206980', '39722', '67655', '37139, 27932', 
			'26364, 89494, 10843, 53631, 31323, 05834, 86967', '1337', '6638, 0927, 0288', '534', '66'),
			('20220820', 2, '997752', '59586', '41899', '80425, 63321', 
			'69533, 88315, 52246, 95098, 49334, 95779, 72849', '3807', '1444, 8218, 0584', '145', '04'), 
			('20220820', 3, '267657', '60884', '75888', '17968, 75301', 
			'54130, 11890, 52480, 09904, 37591, 96329, 49339', '8396', '5664, 8432, 9714', '988', '93'),
			('20220820', 4, '540995', '82763', '67087', '77156, 70867', 
			'42933, 34207, 10543, 42566, 33554, 58103, 35581', '9811', '8222, 2633, 3974', '451', '29'),
			('20220818', 5, '619986', '82544', '17149', '76020, 74406', 
			'74803, 72090, 97954, 85615, 27329, 42761, 30317', '1195', '0356, 5741, 0334', '406', '27'),
			('20220818', 6, '461392', '73237', '27502', '99482, 49161', 
			'73408, 37985, 94156, 09692, 20816, 44908, 50244', '1470', '4514, 9478, 5236', '190', '54'),
			('20220818', 7, '673691', '14478', '12884', '04695, 92632', 
			'30872, 44240, 35761, 38367, 20555, 82647, 11837', '6422', '0238, 8440, 2233', '122', '90'),
			('20221109', 8, '969708', '21721', '46258', '99130, 47879', 
			'22238, 08975, 94579, 39726, 56627, 41252, 08612', '6753', '9747, 4639, 0259', '887', '65'),
			('20220812', 9, '93970', '42956', '73740, 91882', '83289, 82224, 72392, 74037, 55906, 71697', 
			'8776, 4418, 7445, 8959', '1169, 0666, 5630, 9231, 9050, 2909', '821, 686, 067', '19, 90, 38, 72', NULL),
			('20220811', 10, '44082', '54663', '92964, 99837', '22054, 43808, 55157, 92026, 05240, 67821', 
			'2738, 7721, 9324, 8774', '9294, 5523, 0851, 6678, 6552, 6797', '222, 573, 344', '18, 50, 01, 97', NULL),
			('20220807', 11, '80395', '00604', '25509, 78144', '59383, 34164, 25193, 99102, 86355, 12585', 
			'8759, 8509, 1662, 6999', '8566, 5673, 2593, 7055, 8534, 2576', '870, 598, 708', '15, 08, 89, 57', NULL);
INSERT INTO LICHSU_DO (MAND, NGAYDO, MAVE, MAGIAI, KETQUA)
	VALUES (2, '20220820', '432517', 4, -1),
			(2, '20220820', '897612', 4, -1),
			(3, '20220818', '777245', 7, -1),
			(4, '20220820', '059811', 4, 5),
			(3, '20220820', '831323', 1, 4),
			(3, '20220807', '666257', 10, 7),
			(5, '20220812', '353118', 8, -1),
			(7, '20220820', '909853', 3, -1),
			(9, '20220811', '656541', 9, -1),
			(6, '20220820', '997752', 2, 0),
			(6, '20221109', '243123', 2, -1);
		
INSERT INTO AVATAR(MAND)
	VALUES (1),(2),(3),(4),(5),(6),(7),(8),(9),(10),(11);	